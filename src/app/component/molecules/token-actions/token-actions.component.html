<div class="wrapper">
    
    <div class="p-5">
        <div *ngIf="this.action =='DETAILS'">
            <div class="form-content">
                <div *ngFor="let detail of tokenDetails">
                    <p class="form-item-title">{{detail.label}}<br>
                    <label class="form-item-subtitle">{{detail.value}}</label></p>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-secondary px-4" (click)="goToScan()">VER NA SCAN</button>
            </div>
        </div>

        <div>
            <div *ngIf="!isEditMode">
                <div class="form-content">
                    <div *ngFor="let form of formStructure[this.action]">
                        <div *ngIf="form.defaultValue">
                            <p class="form-item-title">{{form.placeholder}}<br>
                            <label class="form-item-subtitle">{{form.defaultValue}}</label></p>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-end" *ngIf="isNewAction">
                    <button type="submit" class="btn btn-secondary px-4" (click)="confirm(formStructure[this.action])">CONFIRMAR</button>
                </div>
                <div class="d-flex justify-content-end" *ngIf="!isNewAction">
                    <app-process-status-tag [processStatus]=statusResponse[this.action].status (click)="refresh(statusResponse[this.action].hashId)"></app-process-status-tag>
                </div>
            </div>

            <div *ngIf="formStructure[this.action] && isEditMode">
                <form [formGroup]="form">
                    <div *ngFor="let field of formStructure[this.action]" class="form-group">
                        <ng-container *ngIf="field.type !== 'textarea'; else textareaField">
                            <input [type]="field.type" class="form-control" [placeholder]="field.placeholder" [formControlName]="field.label" [required]="field.required">
                            <div class="required-message" *ngIf="field.required && isFieldInvalid(field.label) && form.get(field.label).touched">
                                Este campo é obrigatório.
                            </div>
                        </ng-container>
                        <ng-template #textareaField>
                            <textarea class="form-control text-area" rows="4" [placeholder]="field.placeholder" [formControlName]="field.label" [required]="field.required"></textarea>
                            <div class="required-message" *ngIf="field.required && isFieldInvalid(field.label) && form.get(field.label).touched">
                                Este campo é obrigatório.
                            </div>
                        </ng-template>
                    </div>
                  </form>
                  <div class="d-flex justify-content-end">
                    <button (click)="changeMode()" class="btn btn-secondary px-4">{{ButtonsTypes[this.action].label}}</button>
                </div>
            </div>
            
        </div>
    </div>
</div>